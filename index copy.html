<?php

@include 'config/config.php';
@include 'controller/helper.php';

?>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HOME</title>

  <!--
    - favicon
  -->
  <!-- <link rel="shortcut icon" href="./assets/images/logo.ico" type="image/x-icon"> -->

  <!--
    - custom css link
  -->
  <link rel="stylesheet" href="./assets/css/style.css">
  <!--
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

</head>

<body>

  <!--
    - #MAIN
  -->
<main>

    <!--      - #main-content    -->
  <div class="main-content">

    <!--      - #NAVBAR    -->
    <nav class="navbar">
      <ul class="navbar-list">
        <li class="navbar-item">
          <button class="navbar-link active" data-nav-link="home">HOME</button>
        </li>

        <a href="./pages/portfolio.php">
          <button class="navbar-link">PORTFOLIO</button>
        </a>  
        
        <a href="./pages/about-me.php">
          <button class="navbar-link">ABOUT</button>
        </a>

        <a href="./pages/contact-me.php">
          <button class="navbar-link">CONTACT</button>
        </a>
      </ul>
    </nav>

    <article class="about  active" data-page="about">

      <header>
        <h2 class="h2 article-title">ESTIF CREATIONS</h2>
      </header>
      
      <!--      hero section     -->
      <section class="hero">
        <div class="hero-content">
          <h1 class="hero-title">Welcome to my creative hub!</h1>
          <div class="hero-text-container">
          <div class="input-wrapper">
            <input type="text" id="inputField" placeholder=" " />
            <span class="placeholder" id="placeholderText"></span>
        </div>
      </div>
        <button class="hero-btn" onclick="scrollToAbout()">Explore<ion-icon name="chevron-down-outline"></ion-icon></button>
        </div>
      </section>

  </div>


  <!--      about section     -->
  <div class="about-section" id="about">
    <div class="person">
      <div class="container">
        <div class="container-inner">
          <img class="circle"/>
          <img class="img img1" src="./images/estifanose-photo.png"/>
        </div>
      </div>
    </div>

    <div class="about-content">
        <div class="main-title">
          <h1>About Me</h1>
        </div>
        <p>Hi! I'm ESTIFANOSE DEJENE. A recent Computer Science Graduate with a strong commitment to excellence and a passion for the field. Currently freelancing as a web developer, graphics designer, and video editor. This is my personal website, where you can explore a few of my projects that reflect my creativity and technical skills and get a glimpse of my creative process.</p>
        <p>Dive in to discover my work. Feel free to reach out if you’re interested in working together or just want to connect!</p>
        <a href="./pages/about-me.php" class="btn">Read More</a>
    </div>
  </div>

    
  <!--      skills section     -->
  <div class="tools-section-wrapper">
    <div class="my-skills-container">
      <!--   *******  Main Heading Starts  *******   -->
      <div class="main-title">
        <h1>My Skills</h1>
        <p>I am proficient in a range of technical skills, including programming languages like Python, JavaScript and web development with HTML, CSS, and PHP, as well as software tools such as Adobe Creative Suite and Microsoft Office. </p>
      </div>
      <!--   *******  Main Heading Ends  *******   -->

      <div class="row">
        <!--   *******  Left Section Starts here  *******   -->
        <section class="col">
          <div class="sub-title">
            <h2>Programming Skills</h2>
          </div>

          <div class="skills-container">
            <div class="skill">
                <div class="subject">HTML</div>
                <div class="percentage-display">95%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 95%"></div>
                </div>
            </div>


            <div class="skills-container">
            <div class="skill">
                <div class="subject">CSS</div>
                <div class="percentage-display">95%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 95%"></div>
                </div>
            </div>


            <div class="skills-container">
            <div class="skill">
                <div class="subject">JavaScript</div>
                <div class="percentage-display">80%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 80%"></div>
                </div>
            </div>

            <div class="skills-container">
            <div class="skill">
                <div class="subject">Php</div>
                <div class="percentage-display">83%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 83%"></div>
                </div>
            </div>

            <div class="skills-container">
            <div class="skill">
                <div class="subject">SQL</div>
                <div class="percentage-display">85%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 85%"></div>
                </div>
            </div>
          </div>
        </section>
        <!--   ********  Left Section Ends Here  *******  -->

        <!--   ********  Right Section Starts Here  ********  -->
        <section class="col">
          
          <div class="sub-title">
            <h2>Graphics and Media</h2>
          </div>

          <div class="skills-container">
            
            <div class="skill">
              <div class="subject">Adobe Photoshop</div>
              <div class="percentage-display">95%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 95%"></div>
                </div>
              </div>

              <div class="skill">
              <div class="subject">Adobe Illustrator</div>
              <div class="percentage-display">90%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 90%"></div>
                </div>
              </div>

              <div class="skill">
              <div class="subject">Adobe Indesign</div>
              <div class="percentage-display">85%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 85%"></div>
                </div>
              </div>

              <div class="skill">
              <div class="subject">Adobe Premiere Pro</div>
              <div class="percentage-display">90%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 90%"></div>
                </div>
              </div>

              <div class="skill">
              <div class="subject">Figma, Canva</div>
              <div class="percentage-display">98%</div>
                <div class="progress-bar">
                    <div class="progress-line" style="max-width: 98%"></div>
                </div>
              </div>
            </div>
        </section>
        <!--   ********  Right Section Ends Here  ********   -->
      </div>
    </div>
      
    <div class="skill-container">
      <div class="sub-title">
        <h2>Other Programming Skills, UI/UX and Graphics Design Tools</h2>
      </div>
    </div>
    
    <div class="logos">
      <div class="logos-slide">
        <img src="./logos/indesign-icon.svg" />
        <img src="./logos/Adobe_Media_Encoder_Icon.svg" />
        <img src="./logos/adobe-illustrator-icon.svg" />
        <img src="./logos/adobe-lightroom-icon.svg" />
        <img src="./logos/adobe-photoshop-icon.svg" />
        <img src="./logos/adobe-premiere-pro-icon.svg" />
        <img src="./logos/canva-icon.svg" />
        <img src="./logos/figma-icon.svg" />
        <img src="./logos/visual-studio-code-icon.svg" />
        <img src="./logos/acrobat-pro-icon.svg" />
        <img src="./logos/android-studio-icon.svg" />
        <img src="./logos/office-icon.svg" />
        <img src="./logos/c-plus-plus-icon.svg" />
        <img src="./logos/python-icon.svg" />
        <img src="./logos/javascript-icon.svg" />
        <img src="./logos/github-icon.svg" />
        <img src="./logos/git-icon.svg" />
        <img src="./logos/eclipsec-icon.svg" />
        <img src="./logos/intellj-icon.svg" />
        <img src="./logos/mysql-icon.svg" />
        <img src="./logos/php-icon.svg" />
        <img src="./logos/pycharm-icon.svg" />
        
        <img src="./logos/indesign-icon.svg" />
        <img src="./logos/Adobe_Media_Encoder_Icon.svg" />
        <img src="./logos/adobe-illustrator-icon.svg" />
        <img src="./logos/adobe-lightroom-icon.svg" />
        <img src="./logos/adobe-photoshop-icon.svg" />
        <img src="./logos/adobe-premiere-pro-icon.svg" />
        <img src="./logos/canva-icon.svg" />
        <img src="./logos/figma-icon.svg" />
        <img src="./logos/visual-studio-code-icon.svg" />
        <img src="./logos/acrobat-pro-icon.svg" />
        <img src="./logos/android-studio-icon.svg" />
        <img src="./logos/office-icon.svg" />
        <img src="./logos/c-plus-plus-icon.svg" />
        <img src="./logos/python-icon.svg" />
        <img src="./logos/javascript-icon.svg" />
        <img src="./logos/github-icon.svg" />
        <img src="./logos/git-icon.svg" />
        <img src="./logos/eclipsec-icon.svg" />
        <img src="./logos/intellj-icon.svg" />
        <img src="./logos/mysql-icon.svg" />
        <img src="./logos/php-icon.svg" />
        <img src="./logos/pycharm-icon.svg" />
      </div>
    </div>
  </div>
      
  <!--      service section     -->
  <div class="services-section-wrapper">
    
    <div class="main-title">
      <h1>My Services</h1>
    </div>

    <section class="service">
      <ul class="service-list">

        <li class="service-item">

          <div class="service-icon-box">
            <img src="./assets/images/icon-dev.svg" alt="Web development icon" width="40">
          </div>

          <div class="service-content-box">
            <h4 class="h4 service-item-title">Web development</h4>

            <p class="service-item-text">
              Designing user-friendly and visually appealing websites focusing on UI/UX.
            </p>
          </div>

        </li>
        
        <li class="service-item">

          <div class="service-icon-box">
            <img src="./assets/images/icon-design.svg" alt="design icon" width="40">
          </div>

          <div class="service-content-box">
            <h4 class="h4 service-item-title">Graphics Design</h4>

            <p class="service-item-text">
              Design Modern and high-quality graphics tailored to meet all your needs. 
            </p>
          </div>

        </li>

        <li class="service-item">

          <div class="service-icon-box">
            <img src="./assets/images/icon-photo.svg" alt="mobile app icon" width="40">
          </div>

          <div class="service-content-box">
            <h4 class="h4 service-item-title">Video Editing</h4>

            <p class="service-item-text">
              Professional high-quality video edits created with precision and a focus on your unique vision.
            </p>
          </div>

        </li>

      </ul>

    </section>

  </div>

      
  <!--        contact section      -->
  <div class="contact-section-wrapper">
    <div class="main-title">
      <h1>Contact Me</h1>
      <p>I would love to hear from you! If you have any comment, feedback, request please fill out this form. I'll get back to you asap.</p>
    </div>

    <div class="contact-section">
      <div class="info-container">
          <div class="photo-icon">
              <img src="./images/male-operator.png" alt="Photo" />
          </div>
          <p class="description">I would love to hear from you! If you have any comment, feedback, request please fill out this form. I'll get back to you asap.</p>
      </div>

      <div class="contact-form">
        <form id="contactForm" method="post" autocomplete="off">
          <div id="name-div" class="input-container">
            <label for="name-input">Name</label>
            <input id="name-input" type="text" name="name" class="input" required>
          </div>
          <div id="email-div" class="input-container">
            <label for="email-input">Email</label>
            <input id="email-input" type="email" name="email" class="input" required>
          </div>
          <div id="phone-div" class="input-container">
            <label for="phone-input">Phone</label>
            <input id="phone-input" type="tel" name="phone" class="input">
          </div>
          <div id="text-div" class="input-container">
            <label for="text-input">Message</label>
            <textarea id="text-input" name="message" class="input" required></textarea>
          </div>
          <button id="submit-btn" type="submit" class="btn">Send</button>
          <div id="success-message" style="display:none" class="success-message">Message sent successfully!</div>
          <div id="error-message" style="display:none" class="error-message">Failed to send message. Please try again.</div>
        </form>
        </div>
      </div>

      <script>
        document.getElementById("contactForm").addEventListener("submit", async function (e) {
        e.preventDefault(); // Prevent default form submission

        const name = document.getElementById("name-input").value.trim();
        const email = document.getElementById("email-input").value.trim();
        const phone = document.getElementById("phone-input").value.trim();
        const message = document.getElementById("text-input").value.trim();
        const successMessage = document.getElementById("success-message");
        const errorMessage = document.getElementById("error-message");

        // Validate fields
        if (!name || !email || !message) {
            errorMessage.textContent = "Please fill out all required fields.";
            errorMessage.style.display = "block";
            successMessage.style.display = "none";
            return;
        }

        // Submit the form via AJAX
        const formData = new FormData();
        formData.append("name", name);
        formData.append("email", email);
        formData.append("phone", phone);
        formData.append("message", message);

        try {
            const response = await fetch("controller/send.php", {
                method: "POST",
                body: formData,
            });

            const result = await response.text();
            if (response.ok && result.includes("success")) {
                successMessage.style.display = "block";
                errorMessage.style.display = "none";
                document.getElementById("contactForm").reset(); // Reset the form

                // Hide success message after 5 seconds
                setTimeout(() => {
                    successMessage.style.display = "none";
                }, 5000);
            } else {
                errorMessage.textContent = result || "Failed to send message.";
                errorMessage.style.display = "block";
                successMessage.style.display = "none";

                // Hide error message after 5 seconds
                setTimeout(() => {
                    errorMessage.style.display = "none";
                }, 5000);
            }
        } catch (error) {
            console.error("Error:", error);
            errorMessage.textContent = "Failed to send message. Please try again.";
            errorMessage.style.display = "block";
            successMessage.style.display = "none";

            // Hide error message after 5 seconds
            setTimeout(() => {
                errorMessage.style.display = "none";
            }, 5000);
        }});
      </script>
    </div>
  </div>

  <?php
    $servername = "localhost";
    $username = "root";
    $password = "";
    $dbname = "testimonials_system";

    // Create connection
    $conn = new mysqli($servername, $username, $password, $dbname);

    // Check connection
    if ($conn->connect_error) {
        die("Connection failed: " . $conn->connect_error);
    }

    // Fetch approved testimonials
    $sql = "SELECT name, email, caption, message, rating, icon, image_path 
            FROM testimonials 
            WHERE status = 'approved' 
            ORDER BY created_at DESC";

    $result = $conn->query($sql);

    $testimonials = [];
    if ($result->num_rows > 0) {
        while ($row = $result->fetch_assoc()) {
            $testimonials[] = $row;
        }
    }

    $conn->close();
  ?>

  <style>
    .testimonial-image img {
        max-width: 100%;
        height: auto;
    }
  </style>

  <!-- Testimonial Section -->
  <div class="testimonial-section">
    <div class="testimonial-content">
      <div class="main-title">
          <h1>Testimonials</h1>
      </div>

      <div class="testimonial-slider">
        <div class="slider-wrapper">
          <div class="slider-content">
            <?php foreach ($testimonials as $index => $testimonial): ?>
              <div class="testimonial-slide <?= $index === 0 ? 'active' : '' ?>">
                <?php 
                  // Check if image path exists
                  if (!empty($testimonial['image_path'])): 
                ?>

                <div class="testimonial-image">
                  <img 
                      src="<?= htmlspecialchars($testimonial['image_path']) ?>" 
                      alt="<?= htmlspecialchars($testimonial['name']) ?>'s Image">
                </div>

                <?php else: ?>
                    <div>No image found</div>
                <?php endif; ?>

                <i class="slider__image <?= htmlspecialchars($testimonial['icon']) ?>"></i>
                
                <!-- Display Caption -->
                <?php if (!empty($testimonial['caption'])): ?>
                    <h3 class="slider__caption"><?= htmlspecialchars($testimonial['caption']) ?></h3>
                <?php endif; ?>

                <h2 class="slider__name"><?= htmlspecialchars($testimonial['name']) ?></h2>
                <p class="slider__txt"><?= htmlspecialchars($testimonial['message']) ?></p>
                
                <div class="rating">
                  <?php 
                    for ($i = 1; $i <= 5; $i++) {
                        echo $i <= $testimonial['rating'] 
                            ? '★' 
                            : '☆';}
                  ?>
                </div>
              </div>
            <?php endforeach; ?>
          </div>
        </div>
  
        <div class="slider-navigation">
            <button class="slider-btn prev-btn">&#10094;</button>
            <button class="slider-btn next-btn">&#10095;</button>
        </div>

        <div class="slider-dots">
            <?php foreach($testimonials as $index => $testimonial): ?>
                <span class="dot <?= $index === 0 ? 'active' : '' ?>" data-slide="<?= $index ?>"></span>
            <?php endforeach; ?>
        </div>

        <!-- Trigger Button -->
        <button class="testimonial-btn" onclick="openModal()">Leave a Testimonial</button>

        <!-- Modal Container -->
        <div id="testimonialModal" class="modal">
          <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <form action="submit_testimonial.php" method="POST" enctype="multipart/form-data">
              <input type="text" name="name" placeholder="Your Name" required>
              <input type="email" name="email" placeholder="Your Email">
              <input type="text" name="caption" placeholder="Short Caption">
              <textarea name="message" placeholder="Your Testimonial" required></textarea>
              <input type="file" name="testimonial_image" accept="image/*" required>
              <select name="rating">
                <option value="1">1 Star</option>
                <option value="2">2 Stars</option>
                <option value="3">3 Stars</option>
                <option value="4">4 Stars</option>
                <option value="5">5 Stars</option>
              </select>
              <button type="submit">Submit Testimonial</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function openModal() {
        document.getElementById('testimonialModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('testimonialModal').style.display = 'none';
    }

    // Close modal if clicked outside
    window.onclick = function(event) {
        let modal = document.getElementById('testimonialModal');
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }
  </script>

  <footer class="footer">
    <div class="footer-content">
        <div class="social-icons">
            <a href="#" class="social-link" aria-label="Facebook">
                <ion-icon name="logo-facebook"></ion-icon>
            </a>
            <a href="#" class="social-link" aria-label="Telegram">
                <ion-icon name="paper-plane-outline"></ion-icon>
            </a>
            <a href="#" class="social-link" aria-label="Instagram">
                <ion-icon name="logo-instagram"></ion-icon>
            </a>
        </div>
        <a href="./pages/contact-me/admin/index.php" class="admin-login">Admin Login</a>
    </div>

    <hr class="thin-line">

    <p class="footer-text">©2024 Estif Creation. All Rights Reserved.</p>
  </footer>

  </article>

</main>

  <!--    custom js link  -->
  <script src="./assets/js/script.js"></script>

  <!--     ionicon link  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

</body>

</html>
